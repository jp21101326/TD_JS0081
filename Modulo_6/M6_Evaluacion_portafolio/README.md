# üõçÔ∏è Tienda Online - Sistema de Gesti√≥n de Productos

## üìã Descripci√≥n del Proyecto

Aplicaci√≥n web backend desarrollada con Node.js y Express para la gesti√≥n de productos de una tienda en l√≠nea. El sistema permite crear, visualizar y eliminar productos, almacen√°ndolos de manera persistente en archivos JSON.

Este proyecto forma parte de mi portafolio de desarrollo backend y demuestra habilidades en:
- Desarrollo de servidores web con Express
- Gesti√≥n de rutas y middlewares
- Persistencia de datos con el sistema de archivos (fs)
- Manejo profesional de errores
- Validaci√≥n de par√°metros con Yargs
- Interfaz din√°mica con EJS

---

## üéØ Objetivos Cumplidos

‚úÖ **Instalaci√≥n y configuraci√≥n de Node.js y Express**  
‚úÖ **Gesti√≥n de rutas y respuestas din√°micas**  
‚úÖ **Persistencia de datos en archivos JSON**  
‚úÖ **Gesti√≥n de dependencias con npm**  
‚úÖ **Manejo robusto de errores (404, 500)**  
‚úÖ **Interfaz web profesional con motor de plantillas EJS**  

---

## üöÄ Instalaci√≥n del Entorno

### Requisitos Previos

- **Node.js** versi√≥n 14 o superior
- **npm** (incluido con Node.js)

### ¬øQu√© es npm?

**npm (Node Package Manager)** es el gestor de paquetes de Node.js que permite:
- Instalar bibliotecas y dependencias de terceros
- Gestionar versiones de paquetes
- Ejecutar scripts de automatizaci√≥n
- Compartir c√≥digo con la comunidad

### Pasos de Instalaci√≥n

1. **Verificar instalaci√≥n de Node.js y npm:**
   ```bash
   node --version
   npm --version
   ```

2. **Clonar o crear el proyecto:**
   ```bash
   mkdir tienda-online
   cd tienda-online
   ```

3. **Inicializar el proyecto:**
   ```bash
   npm init -y
   ```
   Este comando crea el archivo `package.json` que contiene la configuraci√≥n del proyecto y sus dependencias.

4. **Instalar dependencias de producci√≥n:**
   ```bash
   npm install express ejs body-parser chalk yargs
   ```
   
   - **Express**: Framework web minimalista y flexible para Node.js
   - **EJS**: Motor de plantillas para generar HTML din√°mico
   - **body-parser**: Middleware para procesar datos de formularios
   - **chalk**: Librer√≠a para colorear mensajes en consola
   - **yargs**: Librer√≠a para validaci√≥n profesional de par√°metros

5. **Instalar dependencias de desarrollo:**
   ```bash
   npm install --save-dev nodemon
   ```
   
   - **Nodemon**: Herramienta que reinicia autom√°ticamente el servidor al detectar cambios en el c√≥digo

---

## üìÅ Estructura del Proyecto

```
tienda-online/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ productos.json          # Almacenamiento persistente de productos
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îÇ       ‚îî‚îÄ‚îÄ styles.css          # Estilos de la aplicaci√≥n
‚îú‚îÄ‚îÄ views/
‚îÇ   ‚îú‚îÄ‚îÄ index.ejs               # P√°gina principal
‚îÇ   ‚îú‚îÄ‚îÄ productos.ejs           # Lista de productos
‚îÇ   ‚îú‚îÄ‚îÄ agregar-producto.ejs    # Formulario de nuevo producto
‚îÇ   ‚îî‚îÄ‚îÄ error.ejs               # P√°gina de errores
‚îú‚îÄ‚îÄ server.js                   # Servidor principal de Express
‚îú‚îÄ‚îÄ package.json                # Configuraci√≥n y dependencias
‚îî‚îÄ‚îÄ README.md                   # Documentaci√≥n
```

---

## ‚öôÔ∏è Configuraci√≥n del Servidor Express

### ¬øQu√© es Express?

**Express** es un framework web para Node.js que simplifica la creaci√≥n de servidores y APIs. Proporciona:
- Sistema de enrutamiento robusto
- Middlewares para procesamiento de peticiones
- Integraci√≥n con motores de plantillas
- Manejo de archivos est√°ticos
- Gesti√≥n de errores centralizada

### Caracter√≠sticas del Servidor

El servidor implementa las siguientes funcionalidades:

1. **Puerto Configurable**: Por defecto en 3000, configurable con `--port`
2. **Entornos M√∫ltiples**: Soporte para dev, test y prod con `--env`
3. **Motor de Plantillas EJS**: Renderizaci√≥n din√°mica de HTML
4. **Archivos Est√°ticos**: Servidor de CSS, im√°genes, etc.
5. **Body Parser**: Procesamiento de formularios HTML
6. **Manejo de Errores**: Middlewares para 404 y 500

---

## üõ£Ô∏è Rutas Disponibles

### Rutas Web (HTML)

| M√©todo | Ruta | Descripci√≥n |
|--------|------|-------------|
| GET | `/` | P√°gina principal de bienvenida |
| GET | `/productos` | Lista todos los productos |
| GET | `/productos/agregar` | Formulario para nuevo producto |
| POST | `/productos/agregar` | Procesa el formulario y guarda el producto |
| POST | `/productos/eliminar/:id` | Elimina un producto por ID |

### Rutas API (JSON)

| M√©todo | Ruta | Descripci√≥n |
|--------|------|-------------|
| GET | `/api/productos` | Devuelve productos en formato JSON |

### Manejo de Errores

- **404 Not Found**: Cualquier ruta no definida muestra p√°gina de error
- **500 Server Error**: Errores internos capturados y mostrados de forma amigable

---

## üíæ Persistencia de Datos

### Sistema de Archivos (fs)

El proyecto utiliza el m√≥dulo nativo `fs` de Node.js para leer y escribir datos en archivos JSON.

### Funciones de Persistencia

#### **leerProductos()**
```javascript
function leerProductos() {
  try {
    if (!fs.existsSync(PRODUCTOS_FILE)) {
      // Crear archivo vac√≠o si no existe
      fs.mkdirSync(path.join(__dirname, 'data'), { recursive: true });
      fs.writeFileSync(PRODUCTOS_FILE, JSON.stringify([], null, 2));
      return [];
    }
    const data = fs.readFileSync(PRODUCTOS_FILE, 'utf-8');
    return JSON.parse(data);
  } catch (error) {
    console.error(chalk.red('Error al leer productos:'), error.message);
    return [];
  }
}
```

#### **guardarProductos(productos)**
```javascript
function guardarProductos(productos) {
  try {
    fs.writeFileSync(PRODUCTOS_FILE, JSON.stringify(productos, null, 2));
    return true;
  } catch (error) {
    console.error(chalk.red('Error al guardar productos:'), error.message);
    return false;
  }
}
```

### Ventajas de la Persistencia en Archivos

‚úÖ No requiere configuraci√≥n de base de datos  
‚úÖ F√°cil de implementar y mantener  
‚úÖ Datos legibles en formato JSON  
‚úÖ Perfecto para prototipos y aplicaciones peque√±as  

---

## üì¶ Gesti√≥n de Dependencias con npm

### package.json

Este archivo es el coraz√≥n del proyecto. Contiene:

1. **Metadatos**: Nombre, versi√≥n, descripci√≥n, autor
2. **Scripts**: Comandos personalizados para ejecutar la aplicaci√≥n
3. **Dependencias**: Paquetes necesarios para producci√≥n
4. **DevDependencies**: Paquetes solo para desarrollo

### Scripts Personalizados

```json
"scripts": {
  "dev": "nodemon server.js --env=dev",
  "test": "node server.js --env=test",
  "start": "node server.js --env=prod"
}
```

### Instalaci√≥n de Dependencias

Cuando alguien clona el proyecto, solo necesita ejecutar:
```bash
npm install
```

npm lee `package.json` e instala autom√°ticamente todas las dependencias listadas.

---

## üé® Uso de Chalk para Consola Coloreada

Chalk mejora la experiencia de desarrollo coloreando mensajes:

```javascript
console.log(chalk.green('‚úÖ Producto agregado exitosamente'));
console.log(chalk.red('‚ùå Error al guardar el producto'));
console.log(chalk.blue('‚ÑπÔ∏è Servidor iniciado'));
console.log(chalk.yellow('‚ö†Ô∏è Advertencia: Archivo no encontrado'));
```

### Beneficios

- **Identificaci√≥n r√°pida** de errores vs √©xitos
- **Mejor legibilidad** en la consola
- **Depuraci√≥n m√°s eficiente**

---

## ‚ö° Ejecuci√≥n de la Aplicaci√≥n

### Modo Desarrollo (con Nodemon)

```bash
npm run dev
```

Nodemon reinicia autom√°ticamente el servidor al detectar cambios en el c√≥digo.

### Modo Producci√≥n

```bash
npm start
```

### Con Par√°metros Personalizados

```bash
# Cambiar puerto
node server.js --port=5000

# Cambiar entorno
node server.js --env=test

# Combinar par√°metros
node server.js --env=prod --port=8080
```

### Acceso a la Aplicaci√≥n

Una vez iniciado el servidor, abre tu navegador en:
```
http://localhost:3000
```

---

## üõ°Ô∏è Manejo de Errores

### Tipos de Errores Manejados

1. **Errores de Validaci√≥n (400)**
   - Campos obligatorios faltantes
   - Datos en formato incorrecto

2. **Errores de Recurso No Encontrado (404)**
   - Rutas inexistentes
   - Archivos no encontrados

3. **Errores Internos del Servidor (500)**
   - Fallos al leer/escribir archivos
   - Errores de parsing JSON
   - Excepciones no controladas

### Middleware de Errores 404

```javascript
app.use((req, res) => {
  res.status(404).render('error', {
    mensaje: 'P√°gina no encontrada',
    error: `La ruta ${req.url} no existe`
  });
});
```

### Middleware de Errores 500

```javascript
app.use((err, req, res, next) => {
  console.error(chalk.red('Error del servidor:'), err.stack);
  res.status(500).render('error', {
    mensaje: 'Error interno del servidor',
    error: ENVIRONMENT === 'dev' ? err.message : 'Error inesperado'
  });
});
```

---

## üß™ Pruebas de Funcionalidad

### Checklist de Pruebas

- [ ] El servidor inicia correctamente en el puerto 3000
- [ ] La p√°gina principal se carga y muestra el mensaje de bienvenida
- [ ] La ruta `/productos` muestra la lista vac√≠a inicialmente
- [ ] El formulario de agregar producto funciona correctamente
- [ ] Los productos se guardan en `data/productos.json`
- [ ] Los productos guardados se muestran en la lista
- [ ] Se puede eliminar un producto
- [ ] Las rutas inexistentes muestran error 404
- [ ] Los errores del servidor se manejan adecuadamente
- [ ] La API `/api/productos` devuelve JSON v√°lido

### Datos de Prueba

Producto de ejemplo:
- **Nombre**: Laptop HP Pavilion
- **Descripci√≥n**: Laptop de 15.6 pulgadas con procesador Intel Core i5
- **Precio**: 599.99

---

## üîß Mantenimiento y Producci√≥n

### Recomendaciones para Producci√≥n

1. **Variables de Entorno**: Usar archivo `.env` para configuraciones sensibles
2. **Proceso Manager**: Usar PM2 para mantener el servidor activo
3. **Logs**: Implementar sistema de logs robusto
4. **Validaci√≥n**: Agregar validaci√≥n m√°s estricta en el backend
5. **Base de Datos**: Migrar a MongoDB o PostgreSQL para mayor escalabilidad
6. **Autenticaci√≥n**: Implementar sistema de usuarios y permisos
7. **HTTPS**: Configurar certificados SSL para comunicaci√≥n segura

### Mejoras Futuras

- [ ] Paginaci√≥n de productos
- [ ] B√∫squeda y filtros
- [ ] Edici√≥n de productos existentes
- [ ] Carga de im√°genes
- [ ] Categor√≠as de productos
- [ ] Sistema de inventario
- [ ] Panel de administraci√≥n

---

## üìö Tecnolog√≠as Utilizadas

| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|------------|---------|-----------|
| Node.js | 14+ | Entorno de ejecuci√≥n JavaScript |
| Express | 4.18.2 | Framework web |
| EJS | 3.1.9 | Motor de plantillas |
| Body-Parser | 1.20.2 | Procesamiento de formularios |
| Chalk | 4.1.2 | Colorear consola |
| Yargs | 17.7.2 | Validaci√≥n de par√°metros |
| Nodemon | 3.1.10 | Reinicio autom√°tico (dev) |

---

## üë®‚Äçüíª Autor

**Tu Nombre**  
Proyecto de Portafolio - Desarrollo Backend con Node.js y Express

---

## üìÑ Licencia

ISC

---

## ü§ù Contribuciones

Este es un proyecto educativo de portafolio. Las sugerencias y mejoras son bienvenidas.

---

## üìû Soporte

Si encuentras alg√∫n problema o tienes preguntas:
1. Revisa la documentaci√≥n completa
2. Verifica los logs en la consola del servidor
3. Aseg√∫rate de que todas las dependencias est√©n instaladas
4. Confirma que el archivo `data/productos.json` sea accesible

---

**¬°Gracias por revisar este proyecto!** üöÄ