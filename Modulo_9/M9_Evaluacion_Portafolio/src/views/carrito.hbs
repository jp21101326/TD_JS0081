<div class="container my-4">
  <div class="card shadow-lg p-4">
    
    <h3 class="fw-bold mb-4">
      <i class="bi bi-cart-fill text-warning"></i> Carrito de Compras
    </h3>

    {{#if cart.length}}

      <div class="table-responsive">
        <table class="table table-striped align-middle">
          <thead class="table-dark">
            <tr>
              <th>Libro</th>
              <th class="text-center">Cantidad</th>
              <th class="text-end">Precio</th>
            </tr>
          </thead>

          <tbody>
            {{#each cart}}
              <tr>
                <td>{{this.nombre}}</td>
                <td class="text-center">{{this.cantidad}}</td>
                <td class="text-end">${{this.precio}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>

      <!-- Total -->
      <div class="text-end mt-3 mb-4">
        <h5 class="fw-bold">
          Total: 
          <span class="text-success">
            $
            {{#each cart}}
              {{!-- suma calculada del lado del servidor --}}
            {{/each}}
            {{total}}
          </span>
        </h5>
      </div>

      <form action="/carrito/checkout" method="POST" class="text-end">
        <input type="hidden" name="token" value="{{session.token}}">
        <button class="btn btn-success btn-lg">
          <i class="bi bi-credit-card"></i> Pagar
        </button>
      </form>

    {{else}}

      <div class="text-center py-5">
        <i class="bi bi-cart-x-fill text-secondary" style="font-size: 4rem;"></i>
        <h4 class="mt-3">Tu carrito está vacío</h4>
        <p class="text-muted">Agrega productos desde el catálogo.</p>
        <a href="/libros" class="btn btn-primary mt-3">
          <i class="bi bi-book"></i> Ver catálogo
        </a>
      </div>

    {{/if}}

  </div>
</div>
