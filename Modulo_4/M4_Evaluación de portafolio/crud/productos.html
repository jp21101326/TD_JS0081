<!DOCTYPE html>
<html lang="es">
<head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1" />
     <title>TodoShop Productos</title>
     <!-- Bootstrap -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" />
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" />
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
     <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-light d-flex flex-column min-vh-100">

     <!-- Header -->
     <header class="navbar navbar-dark bg-primary px-3">
         <h1 class="navbar-brand fs-5 mb-0">TodoShop — Administración de Productos</h1>
         <div class="d-flex align-items-center">
             <!-- Login -->
                 <form id="loginForm" class="d-flex gap-2">
                     <input id="email" type="email" class="form-control form-control-sm" placeholder="Email" value="john@mail.com" required />
                     <input id="password" type="password" class="form-control form-control-sm" placeholder="Password" value="changeme" required />
                     <button class="btn btn-success btn-sm" type="submit">
                         <i class="bi bi-box-arrow-in-right"></i> Login
                     </button>
                 </form>
                 <!-- Info usuario -->
                 <div id="authInfo" class="auth-info hidden ms-3">
                     <span id="userEmail" class="me-2 fw-semibold"></span>
                     <button id="logoutBtn" class="btn btn-outline-light btn-sm">
                         <i class="bi bi-box-arrow-left"></i> Salir
                     </button>
                 </div>
         </div>
     </header>

     <!-- Contenedor principal -->
     <main class="container py-3 flex-grow-1">
         <section class="row align-items-center mb-3">
             <div class="col d-flex gap-2">
                 <button id="newBtn" class="btn btn-primary btn-sm">
                     <i class="bi bi-plus-lg"></i> Nuevo producto
                 </button>
             </div>
             <div class="col-auto d-flex gap-2 align-items-center">
                 <label for="limitSelect" class="fw-semibold mb-0" style="color: #424547;">Mostrar:</label>
                 <select class="form-select form-select-sm" id="limitSelect">
                     <option>10</option>
                     <option selected>20</option>
                     <option>30</option>
                     <option>50</option>
                 </select>
                 <button id="refreshBtn" class="btn btn-info btn-sm">
                     <i class="bi bi-arrow-clockwise"></i> Refrescar
                 </button>
             </div>
         </section>

         <!-- Tabla de productos -->
         <section class="table-responsive shadow-sm rounded">
             <table id="productsTable" class="table table-hover table-bordered align-middle mb-0 rounded-3 overflow-hidden">
                 <thead class="table-primary text-dark">
                     <tr>
                         <th>ID</th>
                         <th>Título</th>
                         <th>Precio</th>
                         <th>Categoría</th>
                         <th>Imágenes</th>
                         <th class="text-center">Acciones</th>
                     </tr>
                 </thead>
                 <tbody id="tbody">
                 </tbody>
             </table>
         </section>

         <!-- Paginación -->
         <nav class="d-flex justify-content-center align-items-center my-3 gap-2">
             <button id="prevPage" class="btn btn-outline-primary btn-sm">← Anterior</button>
             <span id="pageInfo" class="text-muted small"></span>
             <button id="nextPage" class="btn btn-outline-primary btn-sm">Siguiente →</button>
         </nav>
     </main>

     <!-- Modal Mantención Producto -->
     <dialog id="productModal" class="p-0 rounded-3 shadow-lg border-0" style="max-width:620px; width:100%;">
         <form id="productForm" method="dialog" class="rounded-3 overflow-hidden">
             <div class="bg-primary text-white d-flex justify-content-between align-items-center px-3 py-2">
                 <h2 id="formTitle" class="fs-5 mb-0">Nuevo producto</h2>
                 <button type="button" id="closeModal" class="btn btn-sm btn-light">✕</button>
             </div>
             <div class="bg-light p-4">
                 <input type="hidden" id="prodId" />
                 <div class="mb-3">
                     <label class="form-label">Título</label>
                     <input id="title" class="form-control" required />
                 </div>
                 <div class="mb-3">
                     <label class="form-label">Precio</label>
                     <input id="price" type="number" min="0" step="0.01" class="form-control" required />
                 </div>
                 <div class="mb-3">
                     <label class="form-label">Descripción</label>
                     <textarea id="description" rows="3" class="form-control" required></textarea>
                 </div>
                 <div class="mb-3">
                     <label class="form-label">Categoría</label>
                     <select id="categoryId" class="form-select" required></select>
                 </div>
                 <div class="mb-3">
                     <label class="form-label">Imágenes (URLs separadas por coma)</label>
                     <input id="images" placeholder="https://... , https://..." class="form-control" required/>
                 </div>
             </div>
             <div class="bg-white border-top px-3 py-2 d-flex justify-content-end gap-2">
                 <button type="submit" class="btn btn-success btn-sm" id="saveBtn">
                     <i class="bi bi-save"></i> Guardar
                 </button>
             </div>
             <!-- <p class="hint small m-3 text-muted">Para crear/editar/eliminar necesitas estar autenticado (Bearer token).</p> -->
             <div style="background-color: orange; text-align: center;">
                <p style="background-color: orange; color: red; font-weight: bold; padding: 0.5rem; border-radius: 5px; text-align: center; margin: 1rem auto; display: inline-block;">
                    Para crear/editar/eliminar necesitas estar autenticado (Bearer token).
                </p>
             </div>
         </form>
     </dialog>

     <!-- Toast -->
     <div id="toast" class="toast hidden"></div>
     <!-- Footer -->
     <footer class="bg-dark text-white text-center py-3 mt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h6 class="fw-bold">TodoShop</h6>
          <p class="mb-0">
            <i class="bi bi-telephone"></i> (+56) 9 1234-5678 |
            <i class="bi bi-envelope"></i> contacto@todoshop.com
          </p>
        </div>
        <div class="col-md-6 text-md-end mt-3 mt-md-0">
          <h6 class="fw-bold">Síguenos</h6>
          <div class="d-flex gap-3 justify-content-md-end">
            <a href="#" class="text-white"><i class="bi bi-facebook fs-5"></i></a>
            <a href="#" class="text-white"><i class="bi bi-twitter fs-5"></i></a>
            <a href="#" class="text-white"><i class="bi bi-linkedin fs-5"></i></a>
            <a href="#" class="text-white"><i class="bi bi-instagram fs-5"></i></a>
          </div>
        </div>
      </div>
    </div>
     </footer>

     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     <script src="script.js" defer></script>
     
</body>
</html>
